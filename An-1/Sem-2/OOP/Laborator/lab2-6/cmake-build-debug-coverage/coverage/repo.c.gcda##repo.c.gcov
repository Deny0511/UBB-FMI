        -:    0:Source:C:/Users/urdad/lab2-6/repo.c
        -:    0:Graph:C:\Users\urdad\lab2-6\cmake-build-debug-coverage\CMakeFiles\lab2_6.dir\repo.c.gcno
        -:    0:Data:C:\Users\urdad\lab2-6\cmake-build-debug-coverage\CMakeFiles\lab2_6.dir\repo.c.gcda
        -:    0:Runs:1
        -:    1:#include <string.h>
        -:    2:#include "repo.h"
        -:    3:#include <stdlib.h>
        -:    4:#include "Cheltuieli.h"
        -:    5:
        -:    6:
function creeaza_lista called 9 returned 100% blocks executed 100%
        9:    7:ListaCheltuieli creeaza_lista(int capacitate_initiala) {
        -:    8:    /**
        -:    9:     * Creeaza o lista de cheltuieli cu o capacitate initiala specificata.
        -:   10:     *
        -:   11:     * @param capacitate_initiala Capacitatea initiala a listei.
        -:   12:     *
        -:   13:     * @return O lista de cheltuieli cu capacitatea initiala alocata si lungimea 0.
        -:   14:     */
        -:   15:    ListaCheltuieli lista;
        9:   16:    lista.lungime = 0;
        9:   17:    lista.capacitate = capacitate_initiala;
        9:   18:    lista.cheltuiala = (Cheltuiala*) malloc(capacitate_initiala * sizeof(Cheltuiala));
        -:   19:
        9:   20:    return lista;
        9:   20-block  0
        -:   21:}
        -:   22:
function distruge_lista called 9 returned 100% blocks executed 100%
        9:   23:void distruge_lista(ListaCheltuieli *lista) {
        -:   24:    /**
        -:   25:     * Distruge lista de cheltuieli, eliberand memoria alocata pentru aceasta.
        -:   26:     *
        -:   27:     * @param lista Pointer catre lista de cheltuieli ce trebuie distrusa.
        -:   28:     *
        -:   29:     * Aceasta functie elibereaza memoria ocupata de lista si reseteaza campurile listei la valori implicite.
        -:   30:     */
        9:   31:    free(lista->cheltuiala);
        9:   32:    lista->cheltuiala = NULL;
        9:   33:    lista->lungime = 0;
        9:   34:    lista->capacitate = 0;
        9:   35:}
        -:   36:
function redimensioneaza_lista called 9 returned 100% blocks executed 100%
        9:   37:void redimensioneaza_lista(ListaCheltuieli *lista) {
        -:   38:    /**
        -:   39:     * Redimensioneaza lista de cheltuieli, dubland capacitatea acesteia.
        -:   40:     *
        -:   41:     * @param lista Pointer catre lista de cheltuieli ce urmeaza a fi redimensionata.
        -:   42:     *
        -:   43:     * Aceasta functie dubleaza capacitatea listei, alocand o noua memorie de dimensiune mai mare.
        -:   44:     */
        -:   45:
        9:   46:    lista->capacitate *= 2;
        9:   47:    Cheltuiala *noua_cheltuiala = realloc(lista->cheltuiala, lista->capacitate * sizeof(Cheltuiala));
        -:   48:
        9:   49:    lista->cheltuiala = noua_cheltuiala;
        9:   50:}
        -:   51:
        -:   52:
function micsoreaza_lista called 5 returned 100% blocks executed 100%
        5:   53:void micsoreaza_lista(ListaCheltuieli *lista) {
        -:   54:    /**
        -:   55:     * Micsoreaza lista de cheltuieli, reducand capacitatea acesteia la jumatate.
        -:   56:     * Daca capacitatea noua este mai mica decat 2, lista nu este redimensionata.
        -:   57:     *
        -:   58:     * @param lista Pointer catre lista de cheltuieli ce urmeaza a fi micsorata.
        -:   59:     *
        -:   60:     * Aceasta functie reduce capacitatea listei la jumatate si elibereaza memoria neutilizata.
        -:   61:     */
        -:   62:
        5:   63:    int noua_capacitate = lista->capacitate / 2;
        5:   64:    if (noua_capacitate < 2) {
        5:   64-block  0
branch  0 taken 1 (fallthrough)
branch  1 taken 4
        1:   65:        return;
        1:   65-block  0
        -:   66:    }
        -:   67:
        4:   68:    Cheltuiala *noua_lista = (Cheltuiala*) malloc(noua_capacitate * sizeof(Cheltuiala));
        -:   69:
        -:   70:
        6:   71:    for (int i = 0; i < lista->lungime; i++) {
        4:   71-block  0
        6:   71-block  1
branch  0 taken 2
branch  1 taken 4 (fallthrough)
        2:   72:        noua_lista[i] = lista->cheltuiala[i];
        2:   72-block  0
        -:   73:    }
        -:   74:
        4:   75:    free(lista->cheltuiala);
        4:   76:    lista->cheltuiala = noua_lista;
        4:   77:    lista->capacitate = noua_capacitate;
        4:   77-block  0
        -:   78:}
        -:   79:
        -:   80:
        -:   81:
        -:   82:
        -:   83:
        -:   84:
        -:   85:
        -:   86:
        -:   87:
function add called 226 returned 100% blocks executed 100%
      226:   88:int add(ListaCheltuieli *lista, int zi, float suma, const char *tip) {
        -:   89:    /**
        -:   90:     * Adauga o noua cheltuiala in lista de cheltuieli.
        -:   91:     *
        -:   92:     * @param lista Pointer catre lista de cheltuieli.
        -:   93:     * @param zi Ziua cheltuielii.
        -:   94:     * @param suma Suma cheltuielii.
        -:   95:     * @param tip Tipul cheltuielii.
        -:   96:     *
        -:   97:     * @return 0 daca adaugarea a fost cu succes,
        -:   98:     *        -1 daca lista este plina.
        -:   99:     */
      226:  100:    if (lista->lungime < MAX_CHELTUIELI) {
      226:  100-block  0
branch  0 taken 222 (fallthrough)
branch  1 taken 4
      222:  101:        if (lista->lungime == lista->capacitate) {
      222:  101-block  0
branch  0 taken 8 (fallthrough)
branch  1 taken 214
        8:  102:            redimensioneaza_lista(lista);
        8:  102-block  0
call    0 returned 8
        -:  103:        }
        -:  104:
      222:  105:        lista->cheltuiala[lista->lungime].zi = zi;
      222:  106:        lista->cheltuiala[lista->lungime].suma = suma;
      222:  107:        strncpy(lista->cheltuiala[lista->lungime].tip, tip, 50);
      222:  108:        lista->lungime++;
        -:  109:
      222:  110:        return 0;
      222:  110-block  0
        -:  111:    }
        4:  112:    return -1;
        4:  112-block  0
        -:  113:}
        -:  114:
function modificare called 4 returned 100% blocks executed 100%
        4:  115:int modificare(ListaCheltuieli *lista, int index, int zi, float suma, const char *tip) {
        -:  116:    /**
        -:  117:     * Modifica o cheltuiala existenta din lista.
        -:  118:     *
        -:  119:     * @param lista Pointer catre lista de cheltuieli.
        -:  120:     * @param index Indexul cheltuielii de modificat.
        -:  121:     * @param zi Noua zi a cheltuielii.
        -:  122:     * @param suma Noua suma a cheltuielii.
        -:  123:     * @param tip Noul tip al cheltuielii.
        -:  124:     *
        -:  125:     * @return 0 daca modificarea a avut succes,
        -:  126:     *         -2 daca indexul este invalid.
        -:  127:     */
        4:  128:    if (index >= 0 && index < lista->lungime) {
        4:  128-block  0
branch  0 taken 4 (fallthrough)
branch  1 taken 0
        4:  128-block  1
branch  2 taken 2 (fallthrough)
branch  3 taken 2
        2:  129:        lista->cheltuiala[index].zi = zi;
        2:  130:        lista->cheltuiala[index].suma = suma;
        2:  131:        strncpy(lista->cheltuiala[index].tip, tip, 50);
        2:  132:        return 0;
        2:  132-block  0
        -:  133:    } else {
        2:  134:        return -2;
        2:  134-block  0
        -:  135:    }
        -:  136:}
        -:  137:
function stergere called 7 returned 100% blocks executed 100%
        7:  138:int stergere(ListaCheltuieli *lista, int index) {
        -:  139:    /**
        -:  140:     * Sterge o cheltuiala din lista.
        -:  141:     *
        -:  142:     * @param lista Pointer catre lista de cheltuieli.
        -:  143:     * @param index Indexul cheltuielii de sters.
        -:  144:     *
        -:  145:     * @return 0 daca stergerea a avut succes,
        -:  146:     *        -2 daca indexul este invalid.
        -:  147:     */
        7:  148:    if (index < 0 || index >= lista->lungime) {
        7:  148-block  0
branch  0 taken 7 (fallthrough)
branch  1 taken 0
        7:  148-block  1
branch  2 taken 3 (fallthrough)
branch  3 taken 4
        3:  149:        return -2;
        3:  149-block  0
        -:  150:    }
        -:  151:
        5:  152:    for (int i = index; i < lista->lungime - 1; i++) {
        4:  152-block  0
        5:  152-block  1
branch  0 taken 1
branch  1 taken 4 (fallthrough)
        1:  153:        lista->cheltuiala[i] = lista->cheltuiala[i + 1];
        1:  153-block  0
        -:  154:    }
        -:  155:
        4:  156:    lista->lungime--;
        -:  157:
        4:  158:    if (lista->lungime < lista->capacitate / 4 && lista->capacitate > 2) {
        4:  158-block  0
branch  0 taken 3 (fallthrough)
branch  1 taken 1
        3:  158-block  1
branch  2 taken 3 (fallthrough)
branch  3 taken 0
        3:  159:        micsoreaza_lista(lista);
        3:  159-block  0
call    0 returned 3
        -:  160:    }
        -:  161:
        4:  162:    return 0;
        4:  162-block  0
        -:  163:}
        -:  164:
function get_all called 2 returned 100% blocks executed 83%
        2:  165:ListaCheltuieli* get_all(ListaCheltuieli *lista) {
        -:  166:    /**
        -:  167:     * Returneaza intreaga lista de cheltuieli.
        -:  168:     *
        -:  169:     * @param lista Pointer catre lista de cheltuieli.
        -:  170:     *
        -:  171:     * @return Pointer catre lista de cheltuieli.
        -:  172:     */
       2*:  173:    if (!lista) return NULL;
        2:  173-block  0
branch  0 taken 0 (fallthrough)
branch  1 taken 2
    %%%%%:  173-block  1
        2:  174:    ListaCheltuieli *copia = (ListaCheltuieli*) malloc(sizeof(ListaCheltuieli));
        -:  175:
        -:  176:
        2:  177:    copia->capacitate = lista->capacitate;
        2:  178:    copia->lungime = lista->lungime;
        2:  179:    copia->cheltuiala = NULL;
        2:  180:    if (lista->lungime > 0) {
        2:  180-block  0
branch  0 taken 2 (fallthrough)
branch  1 taken 0
        2:  181:        copia->cheltuiala = (Cheltuiala*) malloc(lista->lungime * sizeof(Cheltuiala));
        -:  182:
        2:  183:        memcpy(copia->cheltuiala, lista->cheltuiala, lista->lungime * sizeof(Cheltuiala));
        2:  183-block  0
        -:  184:    }
        2:  185:   return copia;
        2:  185-block  0
        -:  186:}
